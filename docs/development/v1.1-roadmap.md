# NiBot v1.1 Roadmap

v1.0.0 delivered the full feature set: 4 channels, 23 tools, pipeline orchestration, self-evolution, MCP bridge, and Docker deployment. v1.1 focuses on real-time capabilities and channel expansion.

## Completed

| Feature | Commit | Lines | Tests |
|---------|--------|-------|-------|
| **Streaming responses** | `802ef9f` | 552 | 11 |
| **Discord channel** | `4f4de18` | 421 | 14 |
| **Task routing + failover + quota** | `2d0b29f` | 876 | 41 |
| **Structured event log** | *pending* | 121+444 | 22 |

**Streaming**: `LLMProvider.chat_stream()` yields `AsyncIterator[str | LLMResponse]`. Agent publishes 30-char chunk Envelopes via bus. Telegram/Discord edit message in-place; Feishu/API ignore intermediate chunks. Provider override detection ensures base-class fallback stays on non-streaming path.

**Discord**: `DiscordChannel(BaseChannel)` with discord.py. Guild @mention filtering, bot-author filtering, dual mention format stripping (`<@id>` / `<@!id>`), 2000-char chunking, edit-in-place streaming, startup failure monitoring.

## Deferred to Future Releases

Features below are validated patterns or known needs, but lack immediate user demand. They can be picked up when real usage justifies the effort.

### Channel Expansion (demand-driven)

| Feature | Status | Rationale for Deferral |
|---------|--------|----------------------|
| **Slack channel** | Pattern validated by Discord | Mechanical repetition -- same BaseChannel + different SDK. No active Slack users waiting. Pick up when enterprise demand materializes. |
| **DingTalk channel** | Pattern validated by Discord | Feishu + WeCom already cover 80% of Chinese enterprise IM. Add when a DingTalk user appears. |

### Capability Expansion (proof-of-need required)

| Feature | Status | Rationale for Deferral |
|---------|--------|----------------------|
| **RAG / vector memory** | Needs proof current MemoryStore is insufficient | Key-value MemoryStore works for current scale. RAG adds chromadb dependency and indexing complexity. Only justified when a real use case proves keyword lookup isn't enough. |
| **Conversation branching** | Design exploration needed | SessionManager linear->tree is a significant refactor (~250 lines). Cool but no user has asked for it. |

### Not Worth Doing (unchanged from v1.0)

| Feature | Why Skip |
|---------|----------|
| OpenTelemetry | Single-process system. `loguru` + `metrics.py` + `/health` covers 90% of observability. |
| Voice input/output | Niche. Most users interact via text. |
| Plugin architecture overhaul | `Tool` ABC + `ToolRegistry` + MCP bridge is already flexible. |
| Multi-language system messages | Config problem -- edit `IDENTITY.md`. Not a code problem. |
| Database backend for sessions | JSONL works at current scale. Database adds operational complexity for zero benefit. |
| GraphQL API | <20 endpoints. REST covers all use cases. |

## Implementation Approach

Same iterative model as v0.6.0-v1.0.0:

1. Each feature gets a plan-mode design review
2. Implementation with tests
3. Codex code review
4. Full test suite verification
5. Commit

## Non-Goals for v1.1

- No breaking changes to config schema
- No new mandatory dependencies
- No changes to JSONL persistence format
- No multi-process/distributed architecture

## v1.1 Summary

v1.1 delivers four core improvements: real-time streaming UX, Discord community reach, multi-provider routing with quota management, and structured event logging for operational analytics. Total: 2414 lines added, 88 new tests, 514 tests passing. All remaining features are deferred until real user demand justifies the complexity.
